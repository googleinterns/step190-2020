<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>gVote</title>

    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">

    <!--Bootstrap Libraries-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"></script>

	<script type='text/javascript' src='config.js'></script>
	<link rel="stylesheet" href="style.css">
      
    <script src="script.js"></script>
    <script src="auto-complete.js"></script>
    <script src="election-info.js"></script>
    
    </head>

    <body onload="onElectionInfoLoad();">
      <div id="page-wrapper">
        <div id="header-bar">
          <a href="index.html" id="home-link">
            <p id="header-text">gVote</p>
          </a>
        </div>

        <div class="container" id="content">
          <div class="row page-title-text" id="election-info-page-title"></div>
          <script id="election-name-template" type="text/x-handlebars-template">
            {{#if electionIdInQuery}}
            <p class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2" id="title-text">
              <b>To show you polling locations and ballot items from the <span id="chosen-election">{{electionName}}</span>, 
                we&apos;ll need your registered voter address:</b>
            </p>
            {{else}}
            <p class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2" id="title-text" style="padding:0">
              <b>Error! No election selected.</b>
            </p>
            <a href="electionlist.html">
              <div class="col-lg-2 col-lg-offset-2 col-md-2 col-md-offset-2 col-sm-2 col-sm-offset-2 generic-button">
                Choose an election here
              </div>
            </a>
            {{/if}}
          </script>
          
          <div style="display:none" id="election-info-wrapper">
            <div class="row input-wrapper">
              <div class="panel noborder panel-primary">
                <div class="container panel-body">
                  <div class="row location-field-wrapper">
                    <div class="col-lg-8 col-lg-offset-2" id="locationField">
                        <input id="autocomplete" 
                               placeholder="Enter your address" 
                               onFocus="geolocate()" 
                               type="text">
                    </div>
                  </div>
                  <div class="row address-row-wrapper">
                    <div class="col-md-2 col-md-offset-1">
                      <input class="form-control" id="street_number" disabled="true">
                      <label class="control-label required">Street Number</label>
                    </div>
                    <div class="col-md-5">
                      <input class="form-control" id="route" disabled="true">
                      <label class="control-label required">Street Name</label>
                    </div>
                    <div class="col-md-3">
                      <input class="form-control field" id="locality" disabled="true">
                      <label class="control-label required">City</label>
                    </div>
                  </div>
  
                  <div class="row address-row-wrapper">
                    <div class="col-md-2 col-md-offset-2"> 
                      <input class="form-control" id="administrative_area_level_1" disabled="true">
                      <label class="control-label required">State</label>
                    </div>
                    <div class="col-md-4">
                      <input class="form-control" id="country" disabled="true">
                      <label class="control-label required">Country</label>
                    </div>
                    <div class="col-md-2">
                      <input class="form-control" id="postal_code" disabled="true">
                      <label class="control-label required">Zip Code</label>
                    </div>
                  </div>
  
                  <div class="row address-row-wrapper" id="address-button-container">
                    <input type="submit" 
                          onclick="logAddressInput();return false;" 
                          disabled="true"
                          class="col-lg-2 col-lg-offset-5 col-md-2 col-md-offset-5 col-sm-2 col-sm-offset-5 generic-button noborder" 
                          id="submit-address-button" 
                          value="Submit"/>
                  </div>
                </div>
              </div>
            </div>

            <div id="spinner"></div>

            <div class="row" id="map-container">
              <div class="col-lg-8 col-lg-offset-2" id="map-wrapper">
                <div id="polling-stations-map" style="height:600px"></div>
              </div>
            </div>

            <div id="election-info-results"></div>
            <script id="contests-referendums-template" type="text/x-handlebars-template">
              <div class="row info-cards-wrapper">
                <div class="container-fluid">
                  <h3 id="info-cards-title">What's on the ballot</h3>
                  <div class="col-md-4 col-lg-offset-2 contests-wrapper">
                    {{#each contests}}
                    <div class="info-card">
                      <div class="info-card-title">
                        {{this.name}}
                      </div>

                      <div class="candidates-wrapper">
                        {{#each this.candidates}}
                        <div class="candidate">
                          <button type="button" class="candidate-name collapsible">
                            <b>{{this.name}} </b>({{this.partyAffiliation}})
                          </button>
                          
                          <div class="collapsible-content candidate-info">
                            {{#if this.campaignSite}}
                            <p><b>Website: </b><a href={{this.campaignSite}} target="_blank">{{stripUrl this.campaignSite}}</a></p>
                            {{/if}}
                            {{#if this.platformDescription}}
                            <p>{{this.platformDescription}}</p>
                            {{/if}}
                            {{#each this.channels}}
                            <p><b>{{@key}}: </b><a href={{this}}>{{stripUrl this}}</a></p>
                            {{/each}}
                          </div>
                        </div>
                        {{/each}}
                        {{#if this.source}}
                        <p class="source-text"><em>Source: {{this.source}}</em></p>
                        {{/if}}
                      </div>
                    </div>
                    {{else}}
                    <p><em>No contests</em></p>
                    {{/each}}
                  </div>
                  <div class="col-md-4 referendums-wrapper">
                    {{#each referendums}}
                    <div class="info-card">
                      <button type="button" class="info-card-title referendum-name collapsible">
                        {{this.title}}
                      </button>
                      <div class="collapsible-content">
                        <p class="referendum-description">
                          {{this.description}}
                        </p>
                        {{#if this.source}}
                        <p class="source-text"><em>Source: {{this.source}}</em></p>
                        {{/if}}
                      </div>
                    </div>
                    {{else}}
                    <p><em>No referendums</em></p>
                    {{/each}}
                  </div>
                </div>
              </div>
            </script>
          </div>
        </div>
			</div>
		</body>
</html>
